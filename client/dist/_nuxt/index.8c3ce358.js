import{q as O,r as x,s as C,u as V,v as R,o as _,c as g,a as l,b as d,x as r,y as U,z as v,_ as I,t as y,w as A,e as D,A as H,B as P,h as j,C as $,D as z,E as T,F,G,d as J,H as K,I as B,J as W,K as Y,L,M as Q}from"./entry.1f0d1014.js";import{b as X,N as Z,n as ee,L as k,v as N,_ as te,a as oe}from"./email.production.7f7ea27f.js";const se=X((o,n)=>{Z(n),ee("password"),k("name","Name is required",()=>{N(o.name).isNotEmpty()}),k("name","3 <= characters <= 20",()=>{N(o.name.trim()).longerThanOrEquals(3).shorterThanOrEquals(20)}),k("password","3 <= characters <= 10",()=>{N(o.password.trim()).longerThanOrEquals(3).shorterThanOrEquals(10)})}),M=se,ne=l("h1",{class:"text-txt text-md text-semibold"},"Create a room",-1),ae=O({__name:"add",emits:["newRoom","close"],setup(o){const n=x(),s=C({name:"",password:""});let c=C(M.get());const u=a=>{c=M({name:s.name,password:s.password},a)},i=a=>{console.log(s),a("newRoom",s.name,s.password),a("close")};V(()=>{R(n.value,{height:[0,"16rem"],width:[0,"23rem"]},{duration:.7})});const p=a=>{R(n.value,{height:["16rem",0],width:["23rem",0]},{duration:.7}),setTimeout(()=>{a("close")},650)};return(a,e)=>{const f=v,w=te,m=oe;return _(),g("main",{ref_key:"modal",ref:n,class:"max-w-[24rem] bg-secondary rounded-xl absolute z-10 lg:left-[20.8rem] md:[20.3rem] top-52 md:top-[7rem] border-[1px] border-btn overflow-hidden max-h-64"},[l("button",{onClick:e[0]||(e[0]=t=>p(a.$emit)),class:"absolute right-0 top-0 text-txt"},[d(f,{name:"material-symbols-light:close-small-rounded",class:"w-8 h-auto"})]),l("form",{onSubmit:e[5]||(e[5]=U(t=>i(a.$emit),["prevent"])),class:"p-5 flex flex-col gap-5"},[ne,d(w,{modelValue:r(s).name,"onUpdate:modelValue":[e[1]||(e[1]=t=>r(s).name=t),e[2]||(e[2]=t=>u("name"))],type:"text",placeholder:"Name",errors:r(c).getErrors("name")},null,8,["modelValue","errors"]),d(w,{modelValue:r(s).password,"onUpdate:modelValue":[e[3]||(e[3]=t=>r(s).password=t),e[4]||(e[4]=t=>u("password"))],errors:r(c).getErrors("password"),placeholder:"Password (optional)"},null,8,["modelValue","errors"]),d(m,{text:"Create",isValid:!r(c).isValid()},null,8,["isValid"])],32)],512)}}});const re={class:"w-full min-h-[3rem] h-fit grid grid-cols-5 items-center border-b-[1px] border-btn gap-2 text-[0.8rem] md:text-sm"},le={class:"text-txt text-center"},me={class:"text-txt text-center"},de={class:"text-txt text-center"},ce={__name:"block",props:{room:{type:Object}},setup(o){const s=o.room.password?"heroicons:lock-closed-20-solid":"heroicons:lock-open-20-solid";return(c,u)=>{const i=v,p=D;return _(),g("main",re,[l("p",le,y(o.room.number),1),l("p",me,y(o.room.name),1),l("p",de,y(o.room.creator),1),d(i,{name:r(s),class:"text-txt text-xs md:text-lg text-center w-full"},null,8,["name"]),d(p,{to:`/rooms/room-${o.room.number}`,class:"text-txt text-xs md:text-lg text-center"},{default:A(()=>[d(i,{class:"text-txt",name:"solar:play-line-duotone"})]),_:1},8,["to"])])}}},ie=I(ce,[["__scopeId","data-v-caf9088a"]]);function ue(){const o=x(!1);function n(){o.value=window.innerHeight+window.scrollY>=document.body.offsetHeight-5}return V(()=>{window.addEventListener("scroll",n),n()}),H(()=>{window.removeEventListener("scroll",n),n()}),{loading:o}}const pe={class:"mt-28 mb-5 flex gap-5 ml-[2%]"},xe={class:"bg-slate-200 w-72 rounded-lg flex justify-between"},_e={type:"submit",class:"mr-2 text-black"},he={class:"w-full h-full bottom-0 relative flex flex-col gap-2 pt-4"},be=Y('<div class="w-full h-fit grid grid-cols-5 p-2 pl-0 pr-0 text-[0.8rem] md:text-sm"><h2 class="text-center text-txt font-semibold md:text-sm">Number</h2><h2 class="text-center text-txt font-semibold md:text-sm">Name</h2><h2 class="text-center text-txt font-semibold md:text-sm">Creator</h2><h2 class="text-center text-txt font-semibold md:text-sm">Password</h2></div>',1),ge={__name:"index",setup(o){const n=P(),{$api:s}=Q(),{loading:c}=ue(),u=x(),i=x(0),p=x([]),a=x(!1),e=x(!1),f=async()=>{try{e.value=!0;const m=await s(`/api/v1/rooms?page=${i.value}`,{method:"GET"});p.value.push(...m),e.value=!1}catch(m){L(m)}},w=async(m,t)=>{try{console.log("testtest");const h=await s("/api/v1/rooms/add",{method:"POST",body:{name:m,admin:n.getUser.id,password:t}});p.value.unshift(h)}catch(h){L(h)}};return V(()=>{f()}),j(c,m=>{i&&m&&(console.log("loading more"),i.value++,f(),c.value=!1)}),(m,t)=>{const h=ae,S=v,E=v,q=ie;return _(),g(B,null,[l("section",pe,[r(a)?(_(),$(h,{key:0,onClose:t[0]||(t[0]=b=>a.value=!1),onNewRoom:w})):z("",!0),l("div",xe,[T(l("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=b=>G(u)?u.value=b:null),placeholder:"Search rooms by number",class:"w-[100%] h-7 md:h-8 p-1 rounded-lg bg-slate-200 text-black text-sm"},null,512),[[F,r(u)]]),l("button",_e,[(_(),$(S,{key:1,name:"material-symbols:search"}))])]),l("button",{onClick:t[2]||(t[2]=b=>a.value=!0),class:"rounded-lg border-[1px] border-btn p-1 items-center flex gap-1 mr-[5%] text-txt hover:bg-btn hover:text-white text-sm"},[d(E,{name:"material-symbols:add-box-outline-rounded",class:"h-auto w-5"}),J(" NEW ")])]),l("section",he,[be,T(d(E,{name:"svg-spinners:gooey-balls-2",class:"w-8 h-auto text-txt relative m-auto mt-32"},null,512),[[K,r(e)]]),(_(!0),g(B,null,W(r(p),b=>(_(),$(q,{room:b},null,8,["room"]))),256))])],64)}}};export{ge as default};
